name = "fooodis-blog"
compatibility_date = "2023-01-01"
pages_build_output_dir = "./"

# ============================================
# D1 Database Binding
# Used for: blog_posts, categories, subcategories, tags, media_library, scheduled_posts, settings
# ============================================
[[d1_databases]]
binding = "DB"
database_name = "fooodis-db"
database_id = "d106fe5e-fbe0-4942-9a9d-42e6c78515ed"

# ============================================
# KV Namespace Binding
# Used for: caching settings, session data, rate limiting
# ============================================
[[kv_namespaces]]
binding = "KV"
id = "cf0ff73f7d304dc79a9c0739d617e633"

# ============================================
# R2 Bucket Binding
# Used for: media uploads (images, videos, attachments)
# ============================================
[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "fooodis-media"

# ============================================
# Environment Variables
# ============================================
[vars]
ENVIRONMENT = "production"
MAX_UPLOAD_SIZE = "10485760"  # 10MB in bytes
ALLOWED_ORIGINS = "https://fooodis.com,https://www.fooodis.com"

# ============================================
# AI Gateway Configuration (Optional but Recommended)
# Provides: cost tracking, retry logic, rate limiting, analytics
# Set these in Cloudflare Dashboard > AI Gateway > Create Gateway
# ============================================
# CF_ACCOUNT_ID = "your-account-id"       # Set in Cloudflare Dashboard secrets
# AI_GATEWAY_ID = "fooodis-ai-gateway"    # Set in Cloudflare Dashboard secrets

# ============================================
# Analytics Engine (Optional)
# Enable in Cloudflare Dashboard > Analytics > Analytics Engine
# Provides: high-performance event tracking and analytics
# ============================================
# [[analytics_engine_datasets]]
# binding = "ANALYTICS"
# dataset = "fooodis_events"

# ============================================
# Queues Configuration
# Used for: async newsletter processing, background jobs
# Create queue in CF Dashboard: Workers & Pages > Queues > Create
# NOTE: consumers are in separate worker (workers/newsletter-consumer)
# ============================================
[[queues.producers]]
binding = "NEWSLETTER_QUEUE"
queue = "fooodis-newsletter-queue"

# ============================================
# Vectorize Configuration
# Used for: chatbot semantic memory, conversation search
# ============================================
[[vectorize]]
binding = "VECTORIZE"
index_name = "fooodis-chatbot-memory"

# ============================================
# Workers AI Configuration
# Used for: cost-effective AI responses for simple queries
# Free tier: 10,000 neurons/day
# ============================================
[ai]
binding = "AI"

# Cloudflare Turnstile (set via Cloudflare dashboard secrets for production)
# TURNSTILE_SECRET_KEY = "your-secret-key"  # Set in Cloudflare dashboard
# TURNSTILE_SITE_KEY = "0x4AAAAAAA"  # Update in login.html

# Note: For Pages deployment, use pages_build_output_dir instead of [site]

# NOTE: Cron triggers are not supported in Cloudflare Pages
# For scheduled automation, keep the dashboard open or use a separate Worker
