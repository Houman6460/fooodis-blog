<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta charset="utf-8"/>
    <meta content="Fooodis Support Center - Submit and Track Support Tickets" name="keywords"/>
    <meta content="Get help with your Fooodis account. Submit support tickets, track progress, and get expert assistance." name="description"/>
    <title data-lang-en="Support Center - Fooodis" data-lang-sv="Supportcenter - Fooodis">Support Center - Fooodis</title>

    <!-- Platform CSS -->
    <link href="css/nicepage.css" media="screen" rel="stylesheet"/>
    <link rel="stylesheet" href="css/blog.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/footer-bubbles.css">
    <link rel="stylesheet" href="css/support-portal.css">
    <link rel="stylesheet" href="css/chatbot-management.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        /* Platform-matching header styles - Exact copy from blog page */
        .fooodis-header *, .mobile-nav * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        .fooodis-header {
            background-color: #1e2127;
            color: #fff;
            padding: 10px 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .fooodis-logo {
            height: 40px;
            width: auto;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .language-selector {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .flag-link {
            display: inline-block;
            transition: transform 0.2s ease;
        }

        .flag-link:hover {
            transform: scale(1.1);
        }

        .flag-icon {
            width: 24px;
            height: 18px;
            border-radius: 2px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        .main-nav {
            display: flex;
        }

        .nav-list {
            display: flex;
            list-style: none;
            gap: 25px;
            align-items: center;
        }

        .nav-item a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-item a:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
        }

        .hamburger-menu {
            display: none;
            flex-direction: column;
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }

        .hamburger-line {
            width: 25px;
            height: 3px;
            background: white;
            margin: 3px 0;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .header-spacer {
            height: 70px;
        }

        /* Mobile navigation */
        .mobile-nav {
            position: fixed;
            top: 0;
            left: -100%;
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: left 0.3s ease;
            z-index: 1001;
            padding: 80px 0 0 0;
        }

        .mobile-nav.active {
            left: 0;
        }

        .mobile-nav-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }

        .mobile-nav-list {
            list-style: none;
            padding: 0;
        }

        .mobile-nav-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mobile-nav-item a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            font-weight: 500;
            transition: background 0.3s ease;
        }

        .mobile-nav-item a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Language switching styles */
        .language-tab {
            display: inline-block;
            padding: 8px 16px;
            margin: 0 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .language-tab.active {
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
            font-weight: bold;
        }

        .language-tab:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Support portal specific styles */
        .support-main {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: calc(100vh - 70px);
            padding: 40px 20px;
        }

        /* Spacer to prevent content from being hidden under fixed header */
        .header-spacer {
            height: 80px;
        }

        /* Main background to match blog page */
        .support-main {
            background-color: #1e2127 !important;
            min-height: 100vh;
        }

        /* Ensure all relevant div elements have the same background */
        .support-container,
        .support-header,
        .ticket-section,
        .section-header,
        .user-status-section,
        .ticket-history-section {
            background-color: #1e2127 !important;
        }

        .support-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .support-header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .support-header h1 {
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .support-header p {
            color: #666;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* Language toggle */
        .language-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .main-nav {
                display: none;
            }

            .hamburger-menu {
                display: flex;
            }

            .header-container {
                padding: 0 15px;
            }

            .language-selector {
                gap: 5px;
            }

            .flag-icon {
                width: 20px;
                height: 15px;
            }
        }
    </style>
</head>
<body class="u-body u-overlap u-overlap-contrast u-overlap-transparent u-xl-mode">
    <!-- Original Fooodis Header - Exact Copy -->
    <header class="fooodis-header">
        <div class="header-container">
            <a class="logo-container" href="https://fooodis.com/">
                <img alt="Fooodis Logo" class="fooodis-logo" src="images/Artboard17copy9.svg"/>
            </a>
            <div class="header-right">
                <!-- Language flags -->
                <div class="language-selector">
                    <a class="flag-link" data-lang="en" href="#" onclick="switchLanguage('en')"><img alt="English" class="flag-icon" src="images/330425.png"/></a>
                    <a class="flag-link" data-lang="sv" href="#" onclick="switchLanguage('sv')"><img alt="Swedish" class="flag-icon" src="images/555606.png"/></a>
                </div>
                <!-- Navigation for desktop -->
                <nav class="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a data-lang-en="Service" data-lang-sv="Tj칛nst" href="https://logoland.se" rel="noopener" target="_blank">Service</a></li>
                        <li class="nav-item"><a data-lang-en="Contact" data-lang-sv="Kontakt" href="Contact.html">Contact</a></li>
                        <li class="nav-item"><a data-lang-en="Blog" data-lang-sv="Blogg" href="blog.html">Blog</a></li>
                        <li class="nav-item"><a data-lang-en="Support" data-lang-sv="Support" href="support.html" class="current-page">Support</a></li>
                        <li class="nav-item"><a data-lang-en="Price" data-lang-sv="Pris" href="Prices.html">Price</a></li>
                        <li class="nav-item"><a data-lang-en="Registrar" data-lang-sv="Registrera" href="https://fooodis.com/new/restaurant/register" rel="noopener" target="_blank">Registrar</a></li>
                        <li class="nav-item"><a data-lang-en="Demo" data-lang-sv="Demo" href="https://demo.fooodis.com/home" rel="noopener" target="_blank">Demo</a></li>
                        <li class="nav-item"><a data-lang-en="Login" data-lang-sv="Logga in" href="https://fooodis.com/login" rel="noopener" target="_blank">Login</a></li>
                    </ul>
                </nav>
                <!-- Hamburger menu for mobile -->
                <button aria-label="Toggle menu" class="hamburger-menu" onclick="toggleMobileNav()">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile navigation menu (hidden by default) -->
    <div class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-close" onclick="closeMobileNav()">칑</div>
        <ul class="mobile-nav-list">
            <li class="mobile-nav-item"><a data-lang-en="SERVICE" data-lang-sv="TJ츿NST" href="https://logoland.se" rel="noopener" target="_blank">SERVICE</a></li>
            <li class="mobile-nav-item"><a data-lang-en="CONTACT" data-lang-sv="KONTAKT" href="Contact.html">CONTACT</a></li>
            <li class="mobile-nav-item"><a data-lang-en="BLOG" data-lang-sv="BLOGG" href="blog.html">BLOG</a></li>
            <li class="mobile-nav-item"><a data-lang-en="SUPPORT" data-lang-sv="SUPPORT" href="support.html" class="current-page">SUPPORT</a></li>
            <li class="mobile-nav-item"><a data-lang-en="PRICE" data-lang-sv="PRIS" href="Prices.html">PRICE</a></li>
            <li class="mobile-nav-item"><a data-lang-en="REGISTRAR" data-lang-sv="REGISTRERA" href="https://fooodis.com/new/restaurant/register" rel="noopener" target="_blank">REGISTRAR</a></li>
            <li class="mobile-nav-item"><a data-lang-en="DEMO" data-lang-sv="DEMO" href="https://demo.fooodis.com/home" rel="noopener" target="_blank">DEMO</a></li>
            <li class="mobile-nav-item"><a data-lang-en="LOGIN" data-lang-sv="LOGGA IN" href="https://fooodis.com/login" rel="noopener" target="_blank">LOGIN</a></li>
        </ul>
    </div>
    <!-- Spacer to prevent content from being hidden under fixed header -->
    <div class="header-spacer"></div>

    <!-- Main Content -->
    <main class="support-main">
        <div class="support-container">
            <!-- Support Header -->
            <div class="support-header">
                <h1><i class="fas fa-headset"></i> <span data-lang-en="Support Center" data-lang-sv="Supportcenter">Support Center</span></h1>
                <p data-lang-en="Need help? Submit a ticket and our team will get back to you promptly." data-lang-sv="Beh칬ver du hj칛lp? Skicka in en f칬rfr친gan s친 친terkommer v친rt team till dig snabbt.">Need help? Submit a ticket and our team will get back to you promptly.</p>

                <!-- Language Toggle -->
                <div class="language-toggle">
                    <span class="language-tab active" data-lang="en" onclick="switchLanguage('en')">
                        <img src="images/330425.png" alt="English"> English
                    </span>
                    <span class="language-tab" data-lang="sv" onclick="switchLanguage('sv')">
                        <img src="images/555606.png" alt="Swedish"> Svenska
                    </span>
                </div>
            </div>

            <!-- User Status Section -->
            <div id="userStatus" class="user-status-section">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- User Dashboard (shown after login) -->
            <section id="userDashboard" class="user-dashboard hidden">
                <div class="dashboard-header">
                    <h2><i class="fas fa-tachometer-alt"></i> <span data-lang-en="My Support Dashboard" data-lang-sv="Min Support Dashboard">My Support Dashboard</span></h2>
                    <div class="user-info">
                        <span class="user-welcome">Welcome, <span id="userName"></span>!</span>
                        <button type="button" class="btn-secondary" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> <span data-lang-en="Logout" data-lang-sv="Logga ut">Logout</span>
                        </button>
                    </div>
                </div>

                <!-- Dashboard Stats -->
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-ticket-alt"></i></div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalTickets">0</div>
                            <div class="stat-label" data-lang-en="Total Tickets" data-lang-sv="Totalt 츿renden">Total Tickets</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-content">
                            <div class="stat-number" id="openTickets">0</div>
                            <div class="stat-label" data-lang-en="Open Tickets" data-lang-sv="칐ppna 츿renden">Open Tickets</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="stat-content">
                            <div class="stat-number" id="resolvedTickets">0</div>
                            <div class="stat-label" data-lang-en="Resolved" data-lang-sv="L칬sta">Resolved</div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Tabs -->
                <div class="dashboard-tabs">
                    <button class="tab-button active" onclick="showTab('createTicket')">
                        <i class="fas fa-plus"></i> <span data-lang-en="New Ticket" data-lang-sv="Nytt 츿rende">New Ticket</span>
                    </button>
                    <button class="tab-button" onclick="showTab('myTickets')">
                        <i class="fas fa-list"></i> <span data-lang-en="My Tickets" data-lang-sv="Mina 츿renden">My Tickets</span>
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Create Ticket Tab -->
                    <div id="createTicketTab" class="tab-pane active">
                        <div class="section-header">
                            <h3><i class="fas fa-plus-circle"></i> <span data-lang-en="Submit a New Support Ticket" data-lang-sv="Skicka in ett nytt support칛rende">Submit a New Support Ticket</span></h3>
                            <p data-lang-en="Please provide detailed information about your issue to help us assist you better." data-lang-sv="V칛nligen ge detaljerad information om ditt problem f칬r att hj칛lpa oss att assistera dig b칛ttre.">Please provide detailed information about your issue to help us assist you better.</p>
                        </div>
                        <!-- The existing ticket form will be moved here via JavaScript -->
                        <div id="dashboardTicketForm"></div>
                    </div>

                    <!-- My Tickets Tab - Admin Dashboard Style -->
                    <div id="myTicketsTab" class="tab-pane">
                        <div class="admin-dashboard-style">
                            <div class="dashboard-header">
                                <h2><span data-lang-en="Support Tickets" data-lang-sv="Support칛renden">Support Tickets</span></h2>
                                <p><span data-lang-en="Manage customer support tickets and inquiries" data-lang-sv="Hantera kundsupport칛renden och f칬rfr친gningar">Manage customer support tickets and inquiries</span></p>
                            </div>

                            <!-- Category Tabs -->
                            <div class="ticket-tabs">
                                <button class="ticket-tab active" data-category="sales" onclick="filterUserTicketsByCategory('sales')">
                                    <span data-lang-en="Sales" data-lang-sv="F칬rs칛ljning">Sales</span> <span class="tab-count">0</span>
                                </button>
                                <button class="ticket-tab" data-category="billing" onclick="filterUserTicketsByCategory('billing')">
                                    <span data-lang-en="Billing" data-lang-sv="Fakturering">Billing</span> <span class="tab-count">0</span>
                                </button>
                                <button class="ticket-tab" data-category="technical-support" onclick="filterUserTicketsByCategory('technical-support')">
                                    <span data-lang-en="Technical Support" data-lang-sv="Teknisk Support">Technical Support</span> <span class="tab-count">0</span>
                                </button>
                                <button class="ticket-tab" data-category="delivery" onclick="filterUserTicketsByCategory('delivery')">
                                    <span data-lang-en="Delivery" data-lang-sv="Leverans">Delivery</span> <span class="tab-count">0</span>
                                </button>
                                <button class="ticket-tab" data-category="general-inquiries" onclick="filterUserTicketsByCategory('general-inquiries')">
                                    <span data-lang-en="General Inquiries" data-lang-sv="Allm칛nna F칬rfr친gningar">General Inquiries</span> <span class="tab-count">0</span>
                                </button>
                                <button class="ticket-tab" data-category="all" onclick="filterUserTicketsByCategory('all')">
                                    <span data-lang-en="All Tickets" data-lang-sv="Alla 츿renden">All Tickets</span> <span class="tab-count">0</span>
                                </button>
                            </div>

                            <!-- Split View Layout -->
                            <div class="ticket-split-view">
                                <!-- Left Panel: Ticket List -->
                                <div class="ticket-list-panel">
                                    <!-- Filters -->
                                    <div class="ticket-controls">
                                        <select id="statusFilter" onchange="filterUserTickets()">
                                            <option value="all" data-lang-en="All Status" data-lang-sv="Alla Status">All Status</option>
                                            <option value="open" data-lang-en="Open" data-lang-sv="칐ppet">Open</option>
                                            <option value="in-progress" data-lang-en="In Progress" data-lang-sv="P친g친ende">In Progress</option>
                                            <option value="resolved" data-lang-en="Resolved" data-lang-sv="L칬st">Resolved</option>
                                            <option value="closed" data-lang-en="Closed" data-lang-sv="St칛ngt">Closed</option>
                                        </select>
                                        <select id="priorityFilter" onchange="filterUserTickets()">
                                            <option value="all" data-lang-en="All Priority" data-lang-sv="All Prioritet">All Priority</option>
                                            <option value="low" data-lang-en="Low" data-lang-sv="L친g">Low</option>
                                            <option value="medium" data-lang-en="Medium" data-lang-sv="Medium">Medium</option>
                                            <option value="high" data-lang-en="High" data-lang-sv="H칬g">High</option>
                                            <option value="urgent" data-lang-en="Urgent" data-lang-sv="Br친dskande">Urgent</option>
                                        </select>
                                        <input type="text" id="searchTickets" placeholder="Search tickets..." onkeyup="searchUserTickets()">
                                    </div>

                                    <!-- Tickets Header -->
                                    <div class="tickets-header">
                                        <h3><span data-lang-en="Tickets" data-lang-sv="츿renden">Tickets</span></h3>
                                        <button class="refresh-btn" onclick="supportPortal.loadUserTickets()" title="Refresh">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                    </div>

                                    <!-- Tickets List -->
                                    <div id="userTicketsList" class="admin-tickets-list">
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>

                                <!-- Right Panel: Ticket Details & Reply -->
                                <div class="ticket-details-panel">
                                    <div class="ticket-details-header">
                                        <h3 id="ticketDetailsTitle"><span data-lang-en="Ticket Details" data-lang-sv="츿rendedetaljer">Ticket Details</span></h3>
                                        <div class="ticket-actions">
                                            <button class="action-btn" title="Refresh" onclick="supportPortal.loadUserTickets()">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                            <button class="action-btn" title="Print" onclick="printTicket()">
                                                <i class="fas fa-print"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Ticket Details Content -->
                                    <div id="userTicketDetails" class="admin-ticket-details">
                                        <div id="noTicketSelected" class="no-ticket-selected">
                                            <i class="fas fa-inbox"></i>
                                            <h4><span data-lang-en="Select a ticket to view details" data-lang-sv="V칛lj ett 칛rende f칬r att se detaljer">Select a ticket to view details</span></h4>
                                            <p><span data-lang-en="Click on any ticket from the list to see conversation history and details" data-lang-sv="Klicka p친 ett 칛rende fr친n listan f칬r att se konversationshistorik och detaljer">Click on any ticket from the list to see conversation history and details</span></p>
                                        </div>

                                        <!-- Selected Ticket Content -->
                                        <div id="selectedTicketContent" class="selected-ticket-content hidden">
                                            <!-- Ticket Header Info -->
                                            <div class="ticket-header-info">
                                                <div class="ticket-title-row">
                                                    <h4 id="selectedTicketSubject"></h4>
                                                    <span id="selectedTicketStatus" class="ticket-status-badge"></span>
                                                </div>
                                                <div class="ticket-meta-info">
                                                    <div class="meta-item">
                                                        <strong><span data-lang-en="Ticket ID" data-lang-sv="츿rende-ID">Ticket ID</span>:</strong>
                                                        <span id="selectedTicketId"></span>
                                                    </div>
                                                    <div class="meta-item">
                                                        <strong><span data-lang-en="Priority" data-lang-sv="Prioritet">Priority</span>:</strong>
                                                        <span id="selectedTicketPriority"></span>
                                                    </div>
                                                    <div class="meta-item">
                                                        <strong><span data-lang-en="Category" data-lang-sv="Kategori">Category</span>:</strong>
                                                        <span id="selectedTicketCategory"></span>
                                                    </div>
                                                    <div class="meta-item">
                                                        <strong><span data-lang-en="Created" data-lang-sv="Skapad">Created</span>:</strong>
                                                        <span id="selectedTicketCreated"></span>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Initial Description -->
                                            <div class="ticket-description">
                                                <h5><span data-lang-en="Description" data-lang-sv="Beskrivning">Description</span></h5>
                                                <div id="selectedTicketDescription" class="ticket-description-content"></div>
                                            </div>

                                            <!-- Conversation History -->
                                            <div class="conversation-section">
                                                <h5><span data-lang-en="Conversation" data-lang-sv="Konversation">Conversation</span></h5>
                                                <div id="conversationHistory" class="conversation-history">
                                                    <!-- Messages will be loaded here -->
                                                </div>
                                            </div>

                                            <!-- Reply Section -->
                                            <div id="replySection" class="reply-section">
                                                <h5><span data-lang-en="Add Reply" data-lang-sv="L칛gg till svar">Add Reply</span></h5>
                                                <form id="replyForm" class="reply-form">
                                                    <div class="form-group">
                                                        <textarea id="replyMessage" name="message" rows="4" required 
                                                                 placeholder="Type your reply here..." 
                                                                 data-lang-en-placeholder="Type your reply here..." 
                                                                 data-lang-sv-placeholder="Skriv ditt svar h칛r..."></textarea>
                                                    </div>

                                                    <!-- File Attachment Section -->
                                                    <div class="attachment-section">
                                                        <div class="attachment-header">
                                                            <label class="attachment-label">
                                                                <i class="fas fa-paperclip"></i>
                                                                <span data-lang-en="Attachments" data-lang-sv="Bilagor">Attachments</span>
                                                                <span class="attachment-limit" data-lang-en="(Max 5MB per file)" data-lang-sv="(Max 5MB per fil)">(Max 5MB per file)</span>
                                                            </label>
                                                        </div>
                                                        <div class="file-upload-area">
                                                            <input type="file" id="replyAttachments" name="attachments" multiple 
                                                                   accept=".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg,.gif" 
                                                                   onchange="handleFileSelection(this)">
                                                            <div class="file-upload-text">
                                                                <i class="fas fa-cloud-upload-alt"></i>
                                                                <span data-lang-en="Click to select files or drag and drop" data-lang-sv="Klicka f칬r att v칛lja filer eller dra och sl칛pp">Click to select files or drag and drop</span>
                                                            </div>
                                                        </div>
                                                        <div id="fileList" class="file-list"></div>
                                                    </div>

                                                    <div class="reply-actions">
                                                        <button type="button" class="btn-secondary" onclick="closeReplySection()">
                                                            <i class="fas fa-times"></i>
                                                            <span data-lang-en="Close" data-lang-sv="St칛ng">Close</span>
                                                        </button>
                                                        <button type="submit" class="btn-primary" id="sendReplyBtn">
                                                            <i class="fas fa-paper-plane"></i>
                                                            <span data-lang-en="Send Reply" data-lang-sv="Skicka svar">Send Reply</span>
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Authentication Required Section (shown when not logged in) -->
            <section id="authRequiredSection" class="ticket-section">
                <div class="section-header">
                    <h2><i class="fas fa-lock"></i> <span data-lang-en="Login Required" data-lang-sv="Inloggning kr칛vs">Login Required</span></h2>
                    <p data-lang-en="Please log in to your account to submit and track support tickets." data-lang-sv="V칛nligen logga in p친 ditt konto f칬r att skicka in och f칬lja support칛renden.">Please log in to your account to submit and track support tickets.</p>
                </div>

                <div class="auth-buttons">
                    <button type="button" class="btn-primary" onclick="showLoginModal()">
                        <i class="fas fa-sign-in-alt"></i> <span data-lang-en="Login" data-lang-sv="Logga in">Login</span>
                    </button>
                    <button type="button" class="btn-secondary" onclick="showRegisterModal()">
                        <i class="fas fa-user-plus"></i> <span data-lang-en="Register" data-lang-sv="Registrera">Register</span>
                    </button>
                </div>
            </section>

            <!-- Public Ticket Creation Section (hidden initially, shown after login) -->
            <section id="ticketCreation" class="ticket-section hidden">
                <div class="section-header">
                    <h2><i class="fas fa-plus-circle"></i> <span data-lang-en="Submit a Support Ticket" data-lang-sv="Skicka in en supportf칬rfr친gan">Submit a Support Ticket</span></h2>
                    <p data-lang-en="Please provide detailed information about your issue to help us assist you better." data-lang-sv="V칛nligen ge detaljerad information om ditt problem f칬r att hj칛lpa oss att assistera dig b칛ttre.">Please provide detailed information about your issue to help us assist you better.</p>
                </div>

                <form id="ticketForm" class="ticket-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ticketCategory"><span data-lang-en="Category" data-lang-sv="Kategori">Category</span> *</label>
                            <select id="ticketCategory" name="category" required>
                                <option value="" data-lang-en="Select Category" data-lang-sv="V칛lj kategori">Select Category</option>
                                <option value="sales" data-lang-en="Sales" data-lang-sv="F칬rs칛ljning">Sales</option>
                                <option value="billing" data-lang-en="Billing" data-lang-sv="Fakturering">Billing</option>
                                <option value="technical-support" data-lang-en="Technical Support" data-lang-sv="Teknisk Support">Technical Support</option>
                                <option value="delivery" data-lang-en="Delivery" data-lang-sv="Leverans">Delivery</option>
                                <option value="general-inquiries" data-lang-en="General Inquiries" data-lang-sv="Allm칛nna F칬rfr친gningar">General Inquiries</option>
                            </select>
                    </div>

                    <div class="form-group">
                        <label for="ticketPriority"><span data-lang-en="Priority" data-lang-sv="Prioritet">Priority</span> *</label>
                        <select id="ticketPriority" name="priority" required>
                            <option value="" data-lang-en="Select Priority" data-lang-sv="V칛lj prioritet">Select Priority</option>
                            <option value="low" data-lang-en="Low - General Question" datalang-sv="L친g - Allm칛n fr친ga">Low - General Question</option>
                            <option value="medium" data-lang-en="Medium - Standard Issue" data-lang-sv="Medium - Standard problem">Medium - Standard Issue</option>
                            <option value="high" data-lang-en="High - Urgent Problem" data-lang-sv="H칬g - Br친dskande problem">High - Urgent Problem</option>
                            <option value="urgent" data-lang-en="Urgent - Business Critical" data-lang-sv="Br친dskande - Aff칛rskritiskt">Urgent - Business Critical</option>
                        </select>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="ticketSubject"><span data-lang-en="Subject" data-lang-sv="츿mne">Subject</span> *</label>
                    <input type="text" id="ticketSubject" name="subject" data-lang-en-placeholder="Brief description of your issue" data-lang-sv-placeholder="Kort beskrivning av ditt problem" placeholder="Brief description of your issue" required>
                </div>

                <div class="form-group full-width">
                    <label for="ticketDescription"><span data-lang-en="Description" data-lang-sv="Beskrivning">Description</span> *</label>
                    <textarea id="ticketDescription" name="description" rows="6" 
                              data-lang-en-placeholder="Please provide detailed information about your issue or question..." 
                              data-lang-sv-placeholder="V칛nligen ge detaljerad information om ditt problem eller din fr친ga..." 
                              placeholder="Please provide detailed information about your issue or question..." required></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-paper-plane"></i> <span data-lang-en="Submit Ticket" data-lang-sv="Skicka f칬rfr친gan">Submit Ticket</span>
                    </button>
                </div>
            </form>
        </section>

        <!-- Login Section (Initially Hidden) -->
        <section id="loginSection" class="ticket-section hidden">
            <div class="section-header">
                <h2><i class="fas fa-sign-in-alt"></i> <span data-lang-en="Customer Login" data-lang-sv="Kundinloggning">Customer Login</span></h2>
                <p data-lang-en="Login to view your ticket history and track support requests." data-lang-sv="Logga in f칬r att se din 칛rendehistorik och sp친ra supportf칬rfr친gningar.">Login to view your ticket history and track support requests.</p>
            </div>

            <form id="customerLoginForm" class="login-form">
                <div class="form-group">
                    <label for="loginEmail"><span data-lang-en="Email Address" data-lang-sv="E-postadress">Email Address</span></label>
                    <input type="email" id="loginEmail" name="email" required>
                </div>

                <div class="form-group">
                    <label for="loginPassword"><span data-lang-en="Password" data-lang-sv="L칬senord">Password</span></label>
                    <input type="password" id="loginPassword" name="password" required>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i> <span data-lang-en="Login" data-lang-sv="Logga in">Login</span>
                    </button>
                    <button type="button" class="btn-secondary" onclick="showTicketCreation()">
                        <i class="fas fa-arrow-left"></i> <span data-lang-en="Back to Submit Ticket" data-lang-sv="Tillbaka till skicka 칛rende">Back to Submit Ticket</span>
                    </button>
                </div>
            </form>
        </section>

        <!-- Customer Ticket History (Shown after login) -->
        <section id="ticketHistory" class="ticket-section hidden">
            <div class="section-header">
                <h2><i class="fas fa-history"></i> <span data-lang-en="My Support Tickets" data-lang-sv="Mina support칛renden">My Support Tickets</span></h2>
                <div class="header-actions">
                    <button class="btn-secondary" onclick="showTicketCreation()">
                        <i class="fas fa-plus"></i> <span data-lang-en="New Ticket" data-lang-sv="Nytt 칛rende">New Ticket</span>
                    </button>
                    <button class="btn-secondary" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> <span data-lang-en="Logout" data-lang-sv="Logga ut">Logout</span>
                    </button>
                </div>
            </div>

            <div class="tickets-grid" id="customerTicketsGrid">
                <!-- Customer tickets will be loaded here -->
            </div>
        </section>

        <!-- Ticket Detail Modal -->
        <div id="ticketDetailModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTicketTitle" data-lang-en="Ticket Details" data-lang-sv="츿rendedetaljer">Ticket Details</h3>
                    <span class="close" onclick="closeTicketModal()">&times;</span>
                </div>
                <div class="modal-body" id="modalTicketContent">
                    <!-- Ticket details will be loaded here -->
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" onclick="closeTicketModal()" data-lang-en="Close" data-lang-sv="St칛ng">Close</button>
                </div>
            </div>
        </div>
        </div>
    </main>

    <!-- Login/Registration Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content auth-modal">
            <div class="modal-header">
                <h3 id="authModalTitle" data-lang-en="Login to Your Account" data-lang-sv="Logga in p친 ditt konto">Login to Your Account</h3>
                <span class="close" onclick="closeAuthModal()">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Login Form -->
                <div id="loginForm" class="auth-form">
                    <form onsubmit="return handleLogin(event)">
                        <div class="form-group">
                            <label for="modalLoginEmail" data-lang-en="Email Address" data-lang-sv="E-postadress">Email Address</label>
                            <input type="email" id="modalLoginEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="modalLoginPassword" data-lang-en="Password" data-lang-sv="L칬senord">Password</label>
                            <input type="password" id="modalLoginPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary auth-btn">
                            <i class="fas fa-sign-in-alt"></i> <span data-lang-en="Login" data-lang-sv="Logga in">Login</span>
                        </button>
                    </form>
                    <div class="auth-links">
                        <p><span data-lang-en="Don't have an account?" data-lang-sv="Har du inget konto?">Don't have an account?</span> <a href="#" onclick="showRegisterForm()" data-lang-en="Create Account" data-lang-sv="Skapa konto">Create Account</a></p>
                        <p><a href="#" onclick="showForgotPassword()" data-lang-en="Forgot Password?" data-lang-sv="Gl칬mt l칬senord?">Forgot Password?</a></p>
                    </div>
                </div>

                <!-- Registration Form -->
                <div id="registerForm" class="auth-form hidden">
                    <form onsubmit="return handleRegister(event)">
                        <div class="form-group">
                            <label for="registerName" data-lang-en="Full Name" data-lang-sv="Fullst칛ndigt namn">Full Name</label>
                            <input type="text" id="registerName" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="registerEmail" data-lang-en="Email Address" data-lang-sv="E-postadress">Email Address</label>
                            <input type="email" id="registerEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="registerPassword" data-lang-en="Password" data-lang-sv="L칬senord">Password</label>
                            <input type="password" id="registerPassword" name="password" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword" data-lang-en="Confirm Password" data-lang-sv="Bekr칛fta l칬senord">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required minlength="6">
                        </div>
                        <button type="submit" class="btn btn-primary auth-btn">
                            <i class="fas fa-user-plus"></i> <span data-lang-en="Create Account" data-lang-sv="Skapa konto">Create Account</span>
                        </button>
                    </form>
                    <div class="auth-links">
                        <p><span data-lang-en="Already have an account?" data-lang-sv="Har du redan ett konto?">Already have an account?</span> <a href="#" onclick="showLoginForm()" data-lang-en="Login" data-lang-sv="Logga in">Login</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Chatbot Widget -->
    <div id="chatbot-widget" class="chatbot-widget">
        <div class="chatbot-header">
            <div class="chatbot-title">
                <i class="fas fa-robot"></i>
                <span data-lang-en="Fooodis Assistant" data-lang-sv="Fooodis Assistent">Fooodis Assistant</span>
            </div>
            <div class="chatbot-controls">
                <button class="chatbot-minimize" title="Minimize">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="chatbot-close" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <div class="chatbot-messages" id="chatbot-messages">
            <div class="welcome-message">
                <div class="message bot-message">
                    <div class="message-content">
                        <span data-lang-en="游녦 Hello! I'm your Fooodis support assistant. How can I help you today?" 
                              data-lang-sv="游녦 Hej! Jag 칛r din Fooodis supportassistent. Hur kan jag hj칛lpa dig idag?">
                            游녦 Hello! I'm your Fooodis support assistant. How can I help you today?
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="chatbot-input-area">
            <div class="chatbot-input-container">
                <input type="text" 
                       id="chatbot-input" 
                       placeholder="Type your message..." 
                       data-lang-en-placeholder="Type your message..." 
                       data-lang-sv-placeholder="Skriv ditt meddelande...">
                <button id="chatbot-send" class="chatbot-send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Chatbot Toggle Button -->
    <div id="chatbot-toggle" class="chatbot-toggle">
        <i class="fas fa-comments"></i>
        <span class="chatbot-notification-badge" id="chatbot-notification-badge">0</span>
    </div>

    <!-- Fooodis Footer with Bubble Animation -->
    <footer class="fooodis-footer">
        <!-- Bubbles animation container -->
        <div class="bubbles">
            <!-- Bubbles will be dynamically generated by JavaScript -->
        </div>

        <div class="footer-container">
            <div class="footer-top">
                <div class="footer-logo">
                    <a href="#">
                        <img src="images/Artboard17copy9.svg" alt="Fooodis Logo" class="fooodis-logo-footer">
                    </a>
                </div>
                <nav class="footer-nav">
                    <ul class="footer-nav-list">
                        <li class="footer-nav-item"><a href="https://logoland.se" target="_blank" rel="noopener" data-lang-en="Service" data-lang-sv="Tj칛nst">Service</a></li>
                        <li class="footer-nav-item"><a href="#" data-lang-en="Contact" data-lang-sv="Kontakt">Contact</a></li>
                        <li class="footer-nav-item"><a href="blog.html" data-lang-en="Blog" data-lang-sv="Blogg">Blog</a></li>
                        <li class="footer-nav-item"><a href="support.html" class="current-page" data-lang-en="Support" data-lang-sv="Support">Support</a></li>
                        <li class="footer-nav-item"><a href="dashboard.html" data-lang-en="Dashboard" data-lang-sv="Instrumentpanel">Dashboard</a></li>
                    </ul>
                </nav>
            </div>

            <div class="footer-bottom">
                <div class="footer-powered-by">
                    <div class="logoland-container">
                        <a href="https://logoland.se/" target="_blank" rel="noopener">
                            <img src="images/Artboard1.svg" alt="LogoLand" class="logoland-logo">
                        </a>
                        <p data-lang-en="Powered by LogoLand with 仇벒잺" data-lang-sv="Drivs av LogoLand med 仇벒잺">Powered by LogoLand with 仇벒잺</p>
                    </div>
                </div>
                <div class="footer-social">
                    <a href="#" target="_blank" rel="noopener noreferrer" class="social-link linkedin" title="Visit Fooodis on LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="social-link facebook" title="Visit Fooodis on Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="social-link instagram" title="Visit Fooodis on Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="social-link twitter" title="Visit Fooodis on X (Twitter)">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="social-link youtube" title="Visit Fooodis on YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize header functionality when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Header shadow and transparency on scroll
            const header = document.querySelector('.fooodis-header');

            function handleScroll() {
                if (window.scrollY > 50) {
                    // When scrolled, make header semi-transparent with blur effect
                    header.style.backgroundColor = 'rgba(30, 33, 39, 0.7)';
                    header.style.backdropFilter = 'blur(10px)';
                    header.style.WebkitBackdropFilter = 'blur(10px)';
                    header.style.boxShadow = '0 4px 30px rgba(0, 0, 0, 0.1)';
                } else {
                    // When at top, restore original background
                    header.style.backgroundColor = '#1e2127';
                    header.style.backdropFilter = '';
                    header.style.WebkitBackdropFilter = '';
                    header.style.boxShadow = '';
                }
            }

            // Initial check and add scroll listener
            handleScroll();
            window.addEventListener('scroll', handleScroll, { passive: true });

            // Mobile menu toggle
            const hamburgerMenu = document.querySelector('.hamburger-menu');
            const mobileNav = document.querySelector('.mobile-nav');
            const closeBtn = document.querySelector('.mobile-nav-close');

            if (hamburgerMenu && mobileNav) {
                hamburgerMenu.addEventListener('click', function() {
                    mobileNav.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });

                if (closeBtn) {
                    closeBtn.addEventListener('click', function() {
                        mobileNav.classList.remove('active');
                        document.body.style.overflow = '';
                    });
                }

                // Close mobile nav when clicking outside
                mobileNav.addEventListener('click', function(e) {
                    if (e.target === mobileNav) {
                        mobileNav.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                });
            }

            // Language switching functionality
            window.switchLanguage = function(lang) {
                document.documentElement.lang = lang;

                // Update language tabs
                document.querySelectorAll('.language-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.getAttribute('data-lang') === lang) {
                        tab.classList.add('active');
                    }
                });

                // Update all translatable elements
                document.querySelectorAll('[data-lang-en]').forEach(element => {
                    const translation = element.getAttribute('data-lang-' + lang);
                    if (translation) {
                        element.textContent = translation;
                    }
                });

                // Update placeholders
                document.querySelectorAll('[data-lang-' + lang + '-placeholder]').forEach(element => {
                    const placeholder = element.getAttribute('data-lang-' + lang + '-placeholder');
                    if (placeholder) {
                        element.placeholder = placeholder;
                    }
                });

                // Update select options
                document.querySelectorAll('option[data-lang-' + lang + ']').forEach(option => {
                    const translation = option.getAttribute('data-lang-' + lang);
                    if (translation) {
                        option.textContent = translation;
                    }
                });
            };

            // Mobile nav toggle functions
            window.toggleMobileNav = function() {
                const mobileNav = document.querySelector('.mobile-nav');
                if (mobileNav) {
                    mobileNav.classList.toggle('active');
                    document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : '';
                }
            };

            window.closeMobileNav = function() {
                const mobileNav = document.querySelector('.mobile-nav');
                if (mobileNav) {
                    mobileNav.classList.remove('active');
                    document.body.style.overflow = '';
                }
            };
        });

        // Footer bubbles animation
        function createBubbles() {
            const bubblesContainer = document.querySelector('.bubbles');
            if (!bubblesContainer) return;

            const bubbleCount = 15;

            for (let i = 0; i < bubbleCount; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.style.left = Math.random() * 100 + '%';
                bubble.style.animationDelay = Math.random() * 15 + 's';
                bubble.style.animationDuration = (Math.random() * 10 + 10) + 's';
                bubblesContainer.appendChild(bubble);
            }
        }

        // Initialize bubbles when page loads
        document.addEventListener('DOMContentLoaded', createBubbles);
    </script>
    <script src="js/support-portal.js"></script>

    <!-- Chatbot Integration Scripts -->
    <script src="js/storage-manager.js"></script>
    <script src="js/chatbot-widget.js"></script>
    <script src="js/chatbot-management.js"></script>
    <script src="js/chatbot-message-enhancer.js"></script>
    <script src="js/chatbot-integration-fixes.js"></script>
    <script src="js/node-flow-builder.js"></script>

    <!-- Initialize Chatbot -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize chatbot after page loads
            setTimeout(() => {
                if (typeof window.ChatbotWidget !== 'undefined') {
                    window.chatbotWidget = new ChatbotWidget();
                    console.log('九 Chatbot initialized on support page');
                } else {
                    console.warn('丘멆잺 ChatbotWidget not available');
                }
            }, 1000);
        });
    </script>
</body>
</html>